find_library(SDSL_LIBRARY NAMES sdsl sdsl-lite)
if(NOT SDSL_LIBRARY)
    FILE(TO_CMAKE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/sdsl-lite" sdsl_project_dir)
    if(NOT EXISTS "${sdsl_project_dir}/CMakeLists.txt")
        execute_process(COMMAND git submodule update --init -- ${sdsl_project_dir}
                        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
    endif()
    set(CMAKE_POLICY_DEFAULT_CMP0048 NEW)
    add_subdirectory(${sdsl_project_dir} EXCLUDE_FROM_ALL)

    if(${CMAKE_VERSION} VERSION_GREATER "3.12.99")
        install(TARGETS sdsl)
    else()
        install(SCRIPT "${sdsl_BINARY_DIR}/lib/cmake_install.cmake")
    endif()
    install(SCRIPT "${sdsl_BINARY_DIR}/include/cmake_install.cmake")
endif()

find_library(GATBL_LIBRARY NAMES gatbl gatb-lite)
if(NOT GATBL_LIBRARY)
    FILE(TO_CMAKE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/gatb-lite" gatbl_project_dir)
    if(NOT EXISTS "${gatbl_project_dir}/CMakeLists.txt")
        execute_process(COMMAND git submodule update --init -- ${gatbl_project_dir}
                        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
    endif()
    add_subdirectory(${gatbl_project_dir} EXCLUDE_FROM_ALL)
    install(SCRIPT "${gatbl_BINARY_DIR}/cmake_install.cmake")
endif()

find_library(CLIPP_LIBRARY NAMES clipp)
if(NOT CLIPP_LIBRARY)
    FILE(TO_CMAKE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/clipp" clipp_project_dir)
    if(NOT EXISTS "${clipp_project_dir}/README.md")
        execute_process(COMMAND git submodule update --init -- ${clipp_project_dir}
                        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR})
    endif()
    if(${CMAKE_VERSION} VERSION_LESS "3.8.0")
        add_library(clipp INTERFACE)
        target_include_directories(clipp INTERFACE "${clipp_project_dir}/include")
    else()
        add_subdirectory(${clipp_project_dir} EXCLUDE_FROM_ALL)
    endif()
endif()
